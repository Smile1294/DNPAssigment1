@page "/addAdult"

@using DNPAssigment1.Persistance
@using DNPAssigment1.Models
@using global::Models

@inject IFamiliesData _families;
@inject NavigationManager NavigationManager;

<AuthorizeView>
    <NotAuthorized>
        @if (true)
        {
            NavigationManager.NavigateTo("/login");
        }
    </NotAuthorized>
    <Authorized>
        <NavBar></NavBar>
        <div class="flex justify-center h-full items-center mt-52">
                <div class="bg-gray-200 bg-opacity-70 shadow-md rounded px-8 pt-6 pb-8 mb-4 grid grid-rows-5 grid-flow-col gap-4  h-1/2 w-1/2">


                    <div class="form-group mb-4">
                        <label class="block text-grey-800 text-sm font-bold mb-2">
                            First Name
                        </label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="text"  @bind-value="@newAdult.FirstName"/>
                    </div>

                    <div class="form-group mb-4">
                        <label class="block text-grey-800 text-sm font-bold mb-2">
                            Last Name
                        </label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="text"  @bind-value="@newAdult.LastName"/>
                    </div>

                    <div class="form-group mb-4">
                        <label class="block text-grey-800 text-sm font-bold mb-2">
                            Age
                        </label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="number" @bind-value="@newAdult.Age"/>
                    </div>

                    <div class="form-group mb-4">
                        <label class="block text-grey-800 text-sm font-bold mb-2">
                            Height
                        </label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="number" @bind-value="@newAdult.Height"/>
                    </div>

                    <div class="form-group mb-4">
                        <label class="block text-grey-800 text-sm font-bold mb-2">
                            Sex
                        </label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="text"@bind-value="@newAdult.Sex"/>
                    </div>

                    <div class="form-group mb-4">
                        <label class="block text-grey-800 text-sm font-bold mb-2">
                            Weight
                        </label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="number"@bind-value="@newAdult.Weight"/>
                    </div>

                    <div class="form-group mb-4">
                        <label class="block text-grey-800 text-sm font-bold mb-2">
                            Eye Color
                        </label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="text" @bind-value="@newAdult.EyeColor"/>
                    </div>

                    <div class="form-group mb-4">
                        <label class="block text-grey-800 text-sm font-bold mb-2">
                            Hair Color
                        </label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="text"@bind-value="@newAdult.HairColor"/>
                    </div>

                    <div class="form-group mb-4">
                        <label class="block text-grey-800 text-sm font-bold mb-2">
                            Salary
                        </label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="number" @bind-value="@_job.Salary"/>
                    </div>

                    <div class="form-group mb-4">
                        <label class="block text-grey-800 text-sm font-bold mb-2">
                            Job Title
                        </label>
                        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="text"  @bind-value="@_job.JobTitle"/>
                    </div>
                    <div></div>
                    <div></div>
                    <div class="actions flex items-center justify-center">
                        <button class="mt-3 btn bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium" @onclick="Add">
                            Submit
                        </button>
                    </div>
                </div>
            </div>
    </Authorized>
</AuthorizeView>


@code {

    private Job _job = new Job();
    private Adult newAdult = new Adult();
    

    private void Add()
    {
        newAdult.JobTitle = _job;
        _families.AddAdult(newAdult);
        NavigationManager.NavigateTo("/");
    }

}